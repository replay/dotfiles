# vim: set textwidth=500 :

# headers I want to see
ignore *
unignore From From: Date: To: Cc: Subject: User-Agent: X-
unignore Return-path: Bcc: Resent-by: Reply-to: Mail-followup-to:
hdr_order From From: To: Cc: Subject: Date:

# mailing lists i'm subscribed to
subscribe scss-sysadmins@scss.tcd.ie
subscribe sysadmins@tcd.ie
subscribe london.pm@london.pm.org

alternative_order text text/html text/plain 
#set folder = "~/Maildir"
set folder = "imaps://tobinjt@mailstore.scss.tcd.ie/"
set smtp_url = "smtp://tobinjt@smtp.scss.tcd.ie:587/"

# Settings for from and to addresses.
set hostname = "scss.tcd.ie"
set from = "tobinjt@scss.tcd.ie"
set realname = "John Tobin"
set use_from = yes
set use_envelope_from=yes

set abort_nosubject = yes
set alias_file = "~/.mutt-aliases"
source "~/.mutt-aliases"
alternates "(John.Tobin|tobinjt)@((.*\.)?(scss|netsoc|cs|maths)\.)?tcd.ie"
#set arrow_cursor = yes
# skip the "who is this to?" questions
set autoedit = yes
set beep_new = yes
#set charset = utf-8
set check_new = yes
# Don't prompt when appending mails to an existing mailbox.
set confirmappend = no
# Delete mails I've marked for deletion.
set delete = yes
# Include the headers when composing mail.
set edit_headers = yes
set editor = "vim"
# Save attachments when saving outgoing mails.
set fcc_attach = "yes"
# the format of the index
set hdr_format = "%4C %Z %{%m/%d} %-15.15F (%4c) %s"
# Don't display help
set help = no
# Don't mess with the hostname when constructing addresses.
set hidden_host = no
# History length
set history = 100
# Force IMAP activity every 60 seconds to stop connections dropping over 3G.
set imap_keepalive = 60
# Include the original when replying to a mail.
set include = yes
set indent_string = "> "
# Check for new mail ever foo seconds.
set mail_check = 30
#set mark_old = no
set mark_old = yes
# Don't mark wrapped lines in the pager
set markers = no
# Include all files in the file browser
set mask = "."
# Create Maildir format mailboxes
set mbox_type = Maildir
set mime_forward = ask-yes
# Don't move read mails to another mailbox.
set move = no
set pager_index_lines = 10
# space doesn't move on to the next message
set pager_stop = yes
set postponed = "=INBOX.Drafts"
set print_command = "a2ps -1 --borders=no -=mail"
# don't prompt after running an external command
set prompt_after = no
set quit = ask-yes
set read_inc = 50
# postponed messages 
set recall = ask-no
set record = "=INBOX.Sent"
# don't automatically move to the next message on delete etc
#set resolve = no
# when replying try to use the address the mail was sent to if different to my
# current address
set reverse_alias = yes
set reverse_name = yes
set signature = "signature $HOME/.mutt-signatures |"
set sort = threads
#set spoolfile = "imaps://tobinjt@mail.cs.tcd.ie/INBOX"
set spoolfile = "="
set suspend = no
set tilde = yes
# how long to wait before checking for new mail
set timeout = 60
set tmpdir = "~/tmp/.mail"
set wait_key = no
set write_inc = 50

color attachment	brightyellow	default
color body		cyan		default \
				(https?|ftp)://[\-\.\,/%~_:?\#a-zA-Z0-9=&]+
color body		cyan		default \
				[\\\$\'\.+_a-zA-Z0-9-]+@[\-\.a-zA-Z0-9=&]+
color bold		brightred	default
color error		default		default
color hdrdefault	cyan		default
color header		green		default ^To:
color header		brightyellow	default ^From:
color header		brightyellow	default ^Subject:
color indicator     default blue
color markers		red		default
color message		default		default
color normal		default		default
color quoted		green		default
color signature		cyan		default
color status		brightgreen	blue
color tilde		blue		default
color tree		red		default
color underline		brightred	default

# When we don't have color . . .
mono  hdrdefault	bold
mono  indicator		reverse
mono  status		reverse
mono  body		bold [\\\$\'\.+_a-zA-Z0-9-]+@[\-\.a-zA-Z0-9=&]+

macro index "S"     "<set-flag>"
macro pager "S"     "<set-flag>"

macro index "O"     "<set-flag>o"
macro pager "O"     "<set-flag>o"

macro index "M"		"<save-message>=bayes_spam<enter>" "Move uncaught spam to =.bayes_spam"
macro pager "M"		"<save-message>=bayes_spam<enter>" "Move uncaught spam to =.bayes_spam"

macro index "a"		"<save-message>=bayes_good<enter>" "Move current mail to =.bayes_good"
macro pager "a"		"<save-message>=bayes_good<enter>" "Move current mail to =.bayes_good"

macro pager "w"		"<tag-entry>"
macro index "w"		"<tag-entry>"

macro pager "\Cw"	"<exit><tag-thread><enter>" "Tag the current thread"
macro index "\Cw"	"<tag-thread>" "Tag the current thread"

#macro index c "<change-folder>?<toggle-mailboxes>" "open a different folder"
#macro pager c "<change-folder>?<toggle-mailboxes>" "open a different folder"

folder-hook . set sort = threads
folder-hook =INBOX.Sent set sort = date-received

# View these MIME types automatically in mutt
folder-hook .  auto_view text/html application/msword
folder-hook .  unauto_view image/gif
folder-hook comics auto_view image/gif

# mailboxes mutt will check for new mail
# Important ones are listed first
unmailboxes *
mailboxes                             \
    "=Ariane"                         \
    "="                               \
    "=masters"                        \
    "=compsci"                        \
    "=sysadmins"                      \
    "=root"                           \
    "=lg12"                           \
    "=hates-software"                 \
    "=london-pm"                      \
    "=p5p"                            \
    "=vim"                            \

# Local settings, not CVS'd
source "~/.muttrc.local"
